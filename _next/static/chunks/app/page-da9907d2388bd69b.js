(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{1625:(e,t,a)=>{Promise.resolve().then(a.bind(a,6413))},1760:e=>{function t(e){var t=Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}t.keys=()=>[],t.resolve=t,t.id=1760,e.exports=t},2714:(e,t,a)=>{"use strict";a.d(t,{J:()=>n});var l=a(5155);a(2115);var s=a(968),i=a(3999);function n(e){let{className:t,...a}=e;return(0,l.jsx)(s.b,{"data-slot":"label",className:(0,i.cn)("flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50",t),...a})}},3999:(e,t,a)=>{"use strict";a.d(t,{cn:()=>i});var l=a(2596),s=a(9688);function i(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];return(0,s.QP)((0,l.$)(t))}},6413:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>eC});var l,s=a(5155),i=a(2115),n=a(6874),r=a.n(n),d=a(760),o=a(8274),c=a(6414),u=a(9343),m=a(5196),h=a(2525),x=a(4616),p=a(2753),f=a(1335),g=a(4869),v=a(4835),j=a(6758),y=a(1154),b=a(825),N=a(9389),k=a(2178),w=a(5690),C=a(6675),P=a(9771),A=a(5273),T=a(4020),S=a(7168),_=a(8482);function L(e){let{value:t,max:a,step:l=1,onChange:i,className:n,"aria-label":r}=e;return(0,s.jsx)("input",{type:"range",value:Number.isFinite(t)?t:0,max:Math.max(a,0),step:l,"aria-label":r,onChange:e=>i(Number(e.target.value)),className:null!=n?n:"w-full h-2 rounded-lg bg-muted accent-primary cursor-pointer"})}var U=a(5452),E=a(4416),z=a(3999);function I(e){let{...t}=e;return(0,s.jsx)(U.bL,{"data-slot":"sheet",...t})}function O(e){let{...t}=e;return(0,s.jsx)(U.l9,{"data-slot":"sheet-trigger",...t})}function B(e){let{...t}=e;return(0,s.jsx)(U.ZL,{"data-slot":"sheet-portal",...t})}function F(e){let{className:t,...a}=e;return(0,s.jsx)(U.hJ,{"data-slot":"sheet-overlay",className:(0,z.cn)("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/50",t),...a})}function D(e){let{className:t,children:a,side:l="right",...i}=e;return(0,s.jsxs)(B,{children:[(0,s.jsx)(F,{}),(0,s.jsxs)(U.UC,{"data-slot":"sheet-content",className:(0,z.cn)("bg-background data-[state=open]:animate-in data-[state=closed]:animate-out fixed z-50 flex flex-col gap-4 shadow-lg transition ease-in-out data-[state=closed]:duration-300 data-[state=open]:duration-500","right"===l&&"data-[state=closed]:slide-out-to-right data-[state=open]:slide-in-from-right inset-y-0 right-0 h-full w-3/4 border-l sm:max-w-sm","left"===l&&"data-[state=closed]:slide-out-to-left data-[state=open]:slide-in-from-left inset-y-0 left-0 h-full w-3/4 border-r sm:max-w-sm","top"===l&&"data-[state=closed]:slide-out-to-top data-[state=open]:slide-in-from-top inset-x-0 top-0 h-auto border-b","bottom"===l&&"data-[state=closed]:slide-out-to-bottom data-[state=open]:slide-in-from-bottom inset-x-0 bottom-0 h-auto border-t",t),...i,children:[a,(0,s.jsxs)(U.bm,{className:"ring-offset-background focus:ring-ring data-[state=open]:bg-secondary absolute top-4 right-4 rounded-xs opacity-70 transition-opacity hover:opacity-100 focus:ring-2 focus:ring-offset-2 focus:outline-hidden disabled:pointer-events-none",children:[(0,s.jsx)(E.A,{className:"size-4"}),(0,s.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})}function R(e){let{className:t,...a}=e;return(0,s.jsx)("div",{"data-slot":"sheet-header",className:(0,z.cn)("flex flex-col gap-1.5 p-4",t),...a})}function $(e){let{className:t,...a}=e;return(0,s.jsx)(U.hE,{"data-slot":"sheet-title",className:(0,z.cn)("text-foreground font-semibold",t),...a})}var M=a(1853);function J(e){let{...t}=e;return(0,s.jsx)(M.bL,{"data-slot":"dropdown-menu",...t})}function Y(e){let{...t}=e;return(0,s.jsx)(M.l9,{"data-slot":"dropdown-menu-trigger",...t})}function Z(e){let{className:t,sideOffset:a=4,...l}=e;return(0,s.jsx)(M.ZL,{children:(0,s.jsx)(M.UC,{"data-slot":"dropdown-menu-content",sideOffset:a,className:(0,z.cn)("bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 max-h-(--radix-dropdown-menu-content-available-height) min-w-[8rem] origin-(--radix-dropdown-menu-content-transform-origin) overflow-x-hidden overflow-y-auto rounded-md border p-1 shadow-md",t),...l})})}function q(e){let{className:t,inset:a,variant:l="default",...i}=e;return(0,s.jsx)(M.q7,{"data-slot":"dropdown-menu-item","data-inset":a,"data-variant":l,className:(0,z.cn)("focus:bg-accent focus:text-accent-foreground data-[variant=destructive]:text-destructive data-[variant=destructive]:focus:bg-destructive/10 dark:data-[variant=destructive]:focus:bg-destructive/20 data-[variant=destructive]:focus:text-destructive data-[variant=destructive]:*:[svg]:!text-destructive [&_svg:not([class*='text-'])]:text-muted-foreground relative flex cursor-default items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 data-[inset]:pl-8 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",t),...i})}function V(e){let{className:t,inset:a,...l}=e;return(0,s.jsx)(M.JU,{"data-slot":"dropdown-menu-label","data-inset":a,className:(0,z.cn)("px-2 py-1.5 text-sm font-medium data-[inset]:pl-8",t),...l})}function X(e){let{className:t,...a}=e;return(0,s.jsx)(M.wv,{"data-slot":"dropdown-menu-separator",className:(0,z.cn)("bg-border -mx-1 my-1 h-px",t),...a})}function H(e){let{...t}=e;return(0,s.jsx)(U.bL,{"data-slot":"dialog",...t})}function G(e){let{...t}=e;return(0,s.jsx)(U.l9,{"data-slot":"dialog-trigger",...t})}function K(e){let{...t}=e;return(0,s.jsx)(U.ZL,{"data-slot":"dialog-portal",...t})}function W(e){let{className:t,...a}=e;return(0,s.jsx)(U.hJ,{"data-slot":"dialog-overlay",className:(0,z.cn)("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/50",t),...a})}function Q(e){let{className:t,children:a,showCloseButton:l=!0,...i}=e;return(0,s.jsxs)(K,{"data-slot":"dialog-portal",children:[(0,s.jsx)(W,{}),(0,s.jsxs)(U.UC,{"data-slot":"dialog-content",className:(0,z.cn)("bg-background data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 fixed top-[50%] left-[50%] z-50 grid w-full max-w-[calc(100%-2rem)] translate-x-[-50%] translate-y-[-50%] gap-4 rounded-lg border p-6 shadow-lg duration-200 sm:max-w-lg",t),...i,children:[a,l&&(0,s.jsxs)(U.bm,{"data-slot":"dialog-close",className:"ring-offset-background focus:ring-ring data-[state=open]:bg-accent data-[state=open]:text-muted-foreground absolute top-4 right-4 rounded-xs opacity-70 transition-opacity hover:opacity-100 focus:ring-2 focus:ring-offset-2 focus:outline-hidden disabled:pointer-events-none [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",children:[(0,s.jsx)(E.A,{}),(0,s.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})}function ee(e){let{className:t,...a}=e;return(0,s.jsx)("div",{"data-slot":"dialog-header",className:(0,z.cn)("flex flex-col gap-2 text-center sm:text-left",t),...a})}function et(e){let{className:t,...a}=e;return(0,s.jsx)("div",{"data-slot":"dialog-footer",className:(0,z.cn)("flex flex-col-reverse gap-2 sm:flex-row sm:justify-end",t),...a})}function ea(e){let{className:t,...a}=e;return(0,s.jsx)(U.hE,{"data-slot":"dialog-title",className:(0,z.cn)("text-lg leading-none font-semibold",t),...a})}var el=a(9852),es=a(2714);let ei={en:{playlist:"Playlist",playlistsTitle:"Your Playlists",newPlaylist:"New Playlist",playlistName:"Playlist name",selectPlaylist:"Select playlist",create:"Create",noPlaylistsYet:"No playlists yet",noTracksInPlaylist:"This playlist is empty",addTrack:"Add Track",title:"Title",titlePlaceholder:"Song title",artist:"Artist",artistPlaceholder:"Artist name",localFile:"Local file",addLocal:"Add local file",onlyLocalInfo:"Upload from your device only (URLs are disabled).",play:"Play",pause:"Pause",prev:"Previous",next:"Next",shuffle:"Shuffle",repeat:"Repeat",repeatOff:"Repeat Off",repeatAll:"Repeat All",repeatOne:"Repeat One",volume:"Volume",mute:"Mute",unmute:"Unmute",seek:"Seek",tip:"Tip: Your uploads are stored per account in a dedicated directory.",noTrack:"No track",noArtist:"Unknown artist",unknown:"—",language:"Language",local:"Local",signOut:"Sign out",delete:"Delete",deleteTrack:"Delete track",deletePlaylist:"Delete playlist",removeFromPlaylist:"Remove from playlist",confirmDeleteTrackTitle:"Delete this track?",confirmDeletePlaylistTitle:"Delete this playlist?",actionCannotBeUndone:"This action cannot be undone.",cancel:"Cancel",confirm:"Confirm"},id:{playlist:"Daftar Lagu",playlistsTitle:"Playlist Anda",newPlaylist:"Playlist Baru",playlistName:"Nama playlist",selectPlaylist:"Pilih playlist",create:"Buat",noPlaylistsYet:"Belum ada playlist",noTracksInPlaylist:"Playlist ini kosong",addTrack:"Tambah Lagu",title:"Judul",titlePlaceholder:"Judul lagu",artist:"Artis",artistPlaceholder:"Nama artis",localFile:"File lokal",addLocal:"Tambah file lokal",onlyLocalInfo:"Hanya unggah dari perangkat Anda (URL dinonaktifkan).",play:"Putar",pause:"Jeda",prev:"Sebelumnya",next:"Berikutnya",shuffle:"Acak",repeat:"Ulang",repeatOff:"Ulang Mati",repeatAll:"Ulang Semua",repeatOne:"Ulang Satu",volume:"Volume",mute:"Bisukan",unmute:"Bunyikan",seek:"Geser",tip:"Tips: Unggahan Anda disimpan per akun di direktori khusus.",noTrack:"Tidak ada lagu",noArtist:"Artis tidak diketahui",unknown:"—",language:"Bahasa",local:"Lokal",signOut:"Keluar",delete:"Hapus",deleteTrack:"Hapus lagu",deletePlaylist:"Hapus playlist",removeFromPlaylist:"Hapus dari playlist",confirmDeleteTrackTitle:"Hapus lagu ini?",confirmDeletePlaylistTitle:"Hapus playlist ini?",actionCannotBeUndone:"Tindakan ini tidak dapat dibatalkan.",cancel:"Batal",confirm:"Konfirmasi"},zh:{playlist:"播放列表",playlistsTitle:"你的播放列表",newPlaylist:"新建播放列表",playlistName:"播放列表名称",selectPlaylist:"选择播放列表",create:"创建",noPlaylistsYet:"还没有播放列表",noTracksInPlaylist:"该播放列表为空",addTrack:"添加歌曲",title:"标题",titlePlaceholder:"歌曲标题",artist:"艺人",artistPlaceholder:"艺人名称",localFile:"本地文件",addLocal:"添加本地文件",onlyLocalInfo:"仅从你的设备上传（禁用链接）。",play:"播放",pause:"暂停",prev:"上一首",next:"下一首",shuffle:"随机",repeat:"循环",repeatOff:"关闭循环",repeatAll:"全部循环",repeatOne:"单曲循环",volume:"音量",mute:"静音",unmute:"取消静音",seek:"进度",tip:"提示：你的上传按账户存储在独立目录中。",noTrack:"无曲目",noArtist:"未知艺人",unknown:"—",language:"语言",local:"本地",signOut:"退出登录",delete:"删除",deleteTrack:"删除歌曲",deletePlaylist:"删除播放列表",removeFromPlaylist:"从播放列表移除",confirmDeleteTrackTitle:"删除这首歌？",confirmDeletePlaylistTitle:"删除这个播放列表？",actionCannotBeUndone:"此操作无法撤销。",cancel:"取消",confirm:"确认"},ja:{playlist:"プレイリスト",playlistsTitle:"あなたのプレイリスト",newPlaylist:"新規プレイリスト",playlistName:"プレイリスト名",selectPlaylist:"プレイリストを選択",create:"作成",noPlaylistsYet:"まだプレイリストがありません",noTracksInPlaylist:"このプレイリストは空です",addTrack:"曲を追加",title:"タイトル",titlePlaceholder:"曲名",artist:"アーティスト",artistPlaceholder:"アーティスト名",localFile:"ローカルファイル",addLocal:"ローカルを追加",onlyLocalInfo:"デバイスからのアップロードのみ（URLは無効）。",play:"再生",pause:"一時停止",prev:"前へ",next:"次へ",shuffle:"シャッフル",repeat:"リピート",repeatOff:"リピートなし",repeatAll:"全曲リピート",repeatOne:"1曲リピート",volume:"音量",mute:"ミュート",unmute:"ミュート解除",seek:"シーク",tip:"ヒント：アップロードはアカウントごとの専用ディレクトリに保存されます。",noTrack:"曲なし",noArtist:"不明なアーティスト",unknown:"—",language:"言語",local:"ローカル",signOut:"ログアウト",delete:"削除",deleteTrack:"曲を削除",deletePlaylist:"プレイリストを削除",removeFromPlaylist:"プレイリストから削除",confirmDeleteTrackTitle:"この曲を削除しますか？",confirmDeletePlaylistTitle:"このプレイリストを削除しますか？",actionCannotBeUndone:"この操作は元に戻せません。",cancel:"キャンセル",confirm:"確認"}},en=(0,i.createContext)({lang:"id",setLang:()=>{},t:e=>e});function er(e){let{children:t,initialLang:a="id",onLangChange:l}=e,[n,r]=(0,i.useState)(a),d=(0,i.useMemo)(()=>e=>{r(t=>t===e?t:e),null==l||l(e)},[l]),o=(0,i.useMemo)(()=>({lang:n,setLang:d,t:e=>{var t;return null!=(t=ei[n][e])?t:e}}),[n,d]);return(0,s.jsx)(en.Provider,{value:o,children:t})}function ed(){return(0,i.useContext)(en)}var eo=a(1362),ec=a(3509),eu=a(2098),em=a(4738);function eh(e){let{theme:t,onThemeChange:a}=e,{setTheme:l}=(0,eo.D)(),i=e=>{l(e),a(e)},n="dark"===t?(0,s.jsx)(ec.A,{className:"h-4 w-4"}):"light"===t?(0,s.jsx)(eu.A,{className:"h-4 w-4"}):(0,s.jsx)(em.A,{className:"h-4 w-4"});return(0,s.jsxs)(J,{children:[(0,s.jsx)(Y,{asChild:!0,children:(0,s.jsxs)(S.$,{variant:"outline",className:"gap-2",children:[n,(0,s.jsx)("span",{className:"hidden sm:inline",children:"system"===t?"System":t[0].toUpperCase()+t.slice(1)})]})}),(0,s.jsxs)(Z,{children:[(0,s.jsx)(V,{children:"Theme"}),(0,s.jsxs)(q,{onClick:()=>i("light"),children:[(0,s.jsx)(eu.A,{className:"mr-2 h-4 w-4"})," Light"]}),(0,s.jsxs)(q,{onClick:()=>i("dark"),children:[(0,s.jsx)(ec.A,{className:"mr-2 h-4 w-4"})," Dark"]}),(0,s.jsxs)(q,{onClick:()=>i("system"),children:[(0,s.jsx)(em.A,{className:"mr-2 h-4 w-4"})," System"]})]})]})}let ex=[{code:"en",label:"English"},{code:"id",label:"Indonesia"},{code:"zh",label:"中文"},{code:"ja",label:"日本語"}];function ep(){var e,t;let{lang:a,setLang:l,t:i}=ed();return(0,s.jsxs)(J,{children:[(0,s.jsx)(Y,{asChild:!0,children:(0,s.jsx)(S.$,{variant:"ghost",className:"px-2",children:null!=(t=null==(e=ex.find(e=>e.code===a))?void 0:e.label)?t:"Language"})}),(0,s.jsxs)(Z,{children:[(0,s.jsx)(V,{children:i("language")}),(0,s.jsx)(X,{}),ex.map(e=>(0,s.jsx)(q,{onClick:()=>l(e.code),children:e.label},e.code))]})]})}var ef=a(5695);let eg=null!=(l=a(1890).env.NEXT_PUBLIC_SUPABASE_BUCKET)?l:"music",ev="https://th.bing.com/th/id/OIF.ZoNLM0I52k2FF8zyN099Ow?w=177&h=180&c=7&r=0&o=5&dpr=1.3&pid=1.7",ej={settings:"mp_settings_v2"};function ey(e){var t,a;let l=/\.([a-z0-9]+)(?:[?#]|$)/i.exec(e);return null!=(a=null==l||null==(t=l[1])?void 0:t.toLowerCase())?a:""}function eb(e){if(null==e||Number.isNaN(e))return"0:00";let t=Math.floor(e%60),a=Math.floor(e/60);return"".concat(a,":").concat(t.toString().padStart(2,"0"))}function eN(e){let{playlists:t,selectedId:a,onSelect:l,onCreate:n,onDeletePlaylist:r,t:d}=e,[o,c]=(0,i.useState)(!1),[x,p]=(0,i.useState)("");return(0,s.jsxs)("div",{children:[(0,s.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,s.jsx)("div",{className:"font-medium",children:d("playlistsTitle")}),(0,s.jsxs)(H,{open:o,onOpenChange:c,children:[(0,s.jsx)(G,{asChild:!0,children:(0,s.jsxs)(S.$,{size:"sm",variant:"outline",className:"gap-1",children:[(0,s.jsx)(u.A,{className:"h-4 w-4"}),d("newPlaylist")]})}),(0,s.jsxs)(Q,{className:"sm:max-w-sm",children:[(0,s.jsx)(ee,{children:(0,s.jsx)(ea,{children:d("newPlaylist")})}),(0,s.jsxs)("div",{className:"grid gap-2",children:[(0,s.jsx)(es.J,{htmlFor:"pl-name",children:d("playlistName")}),(0,s.jsx)(el.p,{id:"pl-name",value:x,onChange:e=>p(e.target.value),placeholder:d("playlistName")})]}),(0,s.jsx)(et,{className:"sm:justify-end",children:(0,s.jsx)(S.$,{onClick:()=>{x.trim()&&(n(x.trim()),p(""),c(!1))},children:d("create")})})]})]})]}),(0,s.jsxs)("div",{className:"space-y-1",children:[t.map(e=>(0,s.jsxs)("div",{className:(0,z.cn)("group w-full flex items-center justify-between rounded-md px-3 py-2 text-sm hover:bg-muted",a===e.id&&"bg-muted"),children:[(0,s.jsx)("button",{className:"flex-1 text-left truncate",onClick:()=>l(e.id),children:e.name}),(0,s.jsxs)("div",{className:"ml-2 flex items-center gap-1",children:[a===e.id&&(0,s.jsx)(m.A,{className:"h-4 w-4","aria-hidden":!0}),(0,s.jsx)(S.$,{variant:"ghost",size:"icon",className:"opacity-70 hover:opacity-100",onClick:()=>r(e),"aria-label":d("deletePlaylist"),children:(0,s.jsx)(h.A,{className:"h-4 w-4"})})]})]},e.id)),0===t.length&&(0,s.jsx)("div",{className:"text-xs text-muted-foreground",children:d("noPlaylistsYet")})]})]})}function ek(e){let{playlists:t,onUpload:a,t:l}=e,[n,r]=(0,i.useState)(!1),[d,o]=(0,i.useState)(""),[c,u]=(0,i.useState)(""),[m,h]=(0,i.useState)(null),[p,f]=(0,i.useState)("");return(0,i.useEffect)(()=>{!p&&t[0]&&f(t[0].id)},[t,p]),(0,s.jsxs)(H,{open:n,onOpenChange:r,children:[(0,s.jsx)(G,{asChild:!0,children:(0,s.jsxs)(S.$,{variant:"secondary",className:"gap-2",children:[(0,s.jsx)(x.A,{className:"h-4 w-4"}),l("addTrack")]})}),(0,s.jsxs)(Q,{className:"sm:max-w-md",children:[(0,s.jsx)(ee,{children:(0,s.jsx)(ea,{children:l("addTrack")})}),(0,s.jsxs)("div",{className:"grid gap-4",children:[(0,s.jsxs)("div",{className:"grid gap-2",children:[(0,s.jsx)(es.J,{htmlFor:"title",children:l("title")}),(0,s.jsx)(el.p,{id:"title",placeholder:l("titlePlaceholder"),value:d,onChange:e=>o(e.target.value)})]}),(0,s.jsxs)("div",{className:"grid gap-2",children:[(0,s.jsx)(es.J,{htmlFor:"artist",children:l("artist")}),(0,s.jsx)(el.p,{id:"artist",placeholder:l("artistPlaceholder"),value:c,onChange:e=>u(e.target.value)})]}),(0,s.jsxs)("div",{className:"grid gap-2",children:[(0,s.jsx)(es.J,{htmlFor:"file",children:l("localFile")}),(0,s.jsx)(el.p,{id:"file",type:"file",accept:"audio/mpeg,audio/mp3,audio/mp4,audio/aac,audio/ogg,audio/wav,audio/webm,audio/*",onChange:e=>{var t,a;return h(null!=(a=null==(t=e.target.files)?void 0:t[0])?a:null)}}),(0,s.jsx)("div",{className:"text-xs text-muted-foreground",children:l("onlyLocalInfo")})]}),(0,s.jsxs)("div",{className:"grid gap-2",children:[(0,s.jsx)(es.J,{id:"addtrack-playlist-label",htmlFor:"addtrack-playlist",children:l("selectPlaylist")}),(0,s.jsx)("select",{id:"addtrack-playlist","aria-labelledby":"addtrack-playlist-label",title:l("selectPlaylist"),className:"h-9 rounded-md border bg-background px-3 text-sm",value:p,onChange:e=>f(e.target.value),children:t.map(e=>(0,s.jsx)("option",{value:e.id,children:e.name},e.id))})]})]}),(0,s.jsx)(et,{className:"sm:justify-end",children:(0,s.jsx)(S.$,{disabled:!m||!d.trim()||!c.trim()||!p,onClick:()=>{m&&p&&(a({file:m,title:d.trim(),artist:c.trim(),playlistId:p}),r(!1),o(""),u(""),h(null))},children:l("addLocal")})})]})]})}function ew(){let e=(0,ef.useRouter)(),t=(0,c.A)(),[a,l]=(0,i.useState)(null),[n,r]=(0,i.useState)([]),[u,m]=(0,i.useState)(null),[x,U]=(0,i.useState)([]),[E,B]=(0,i.useState)(null),[F,M]=(0,i.useState)(null),{currentTrack:G,currentIndex:K,setCurrentIndex:W,isPlaying:el,togglePlay:es,currentTime:ei,duration:en,seek:eo,volume:ec,setVolume:eu,next:em,prev:ex,repeat:ew,setRepeatMode:eC,shuffle:eP,toggleShuffle:eA,loading:eT,lastError:eS,lang:e_,setLang:eL,theme:eU,setTheme:eE}=function(e){let t=(0,i.useRef)(null),[a,l]=(0,i.useState)(0),[s,n]=(0,i.useState)(!1),[r,d]=(0,i.useState)(0),[o,c]=(0,i.useState)(0),[u,m]=(0,i.useState)(!1),[h,x]=function(e,t){let[a,l]=(0,i.useState)(t),[s,n]=(0,i.useState)(!1);return(0,i.useEffect)(()=>{try{let t=localStorage.getItem(e);if(t){let e=JSON.parse(t);l(t=>Object.is(t,e)?t:e)}}catch(e){}finally{n(!0)}},[e]),(0,i.useEffect)(()=>{if(s)try{localStorage.setItem(e,JSON.stringify(a))}catch(e){}},[s,e,a]),[a,l]}(ej.settings,{volume:.9,shuffle:!1,repeat:"off",lang:"id",theme:"system"}),[p,f]=(0,i.useState)([]),[g,v]=(0,i.useState)(null),j=e[a];(0,i.useEffect)(()=>{let e=new Audio;t.current=e,e.preload="metadata",e.volume=h.volume;let a=()=>d(e.currentTime),l=()=>{c(e.duration||0),m(!1)},s=()=>m(!0),i=()=>n(!0),r=()=>n(!1),o=()=>N(),u=()=>{var t;let a=null==(t=e.error)?void 0:t.code;v(1===a?"Aborted":2===a?"Network error while loading audio":3===a?"Decoding error (format not supported)":4===a?"Source not supported or URL unreachable":"Unknown audio error"),m(!1),n(!1)};return e.addEventListener("timeupdate",a),e.addEventListener("loadedmetadata",l),e.addEventListener("waiting",s),e.addEventListener("playing",()=>m(!1)),e.addEventListener("play",i),e.addEventListener("pause",r),e.addEventListener("ended",o),e.addEventListener("error",u),()=>{e.pause(),e.src="",e.removeEventListener("timeupdate",a),e.removeEventListener("loadedmetadata",l),e.removeEventListener("waiting",s),e.removeEventListener("play",i),e.removeEventListener("pause",r),e.removeEventListener("ended",o),e.removeEventListener("error",u)}},[]),(0,i.useEffect)(()=>{let a=t.current;if(!a||0===e.length)return;let l=(null==j?void 0:j.src)||"";if(!l){n(!1),m(!1),v("No source URL.");return}if(!function(e){let t=ey(e);return!t||["mp3","m4a","aac","ogg","wav","webm","opus"].includes(t)}(l)){n(!1),m(!1),v("Unsupported file type.");return}m(!0),d(0),c(0),v(null),a.src=l,(async()=>{try{s&&await a.play()}catch(e){v((null==e?void 0:e.message)||"Failed to start playback."),m(!1)}})()},[a,e.map(e=>e.src).join("|")]),(0,i.useEffect)(()=>{t.current&&(t.current.volume=h.volume)},[h.volume]);let y=async()=>{let e=t.current;if(e)if(e.paused){m(!0);try{await e.play(),v(null)}catch(e){v((null==e?void 0:e.message)||"Failed to play audio.")}finally{m(!1)}}else e.pause()},b=()=>{if(0===e.length)return 0;if(h.shuffle){if(1===e.length)return a;let t=a;for(;t===a;)t=Math.floor(Math.random()*e.length);return t}return(a+1)%e.length},N=()=>{if("one"===h.repeat){let e=t.current;if(!e)return;e.currentTime=0,e.play().catch(()=>{});return}if("all"===h.repeat||h.shuffle){h.shuffle&&f(e=>[...e,a]),l(b());return}if(a<e.length-1)l(a+1);else{n(!1);let e=t.current;e&&(e.currentTime=0,e.pause())}},k=(0,i.useCallback)(e=>x(t=>t.lang===e?t:{...t,lang:e}),[]),w=(0,i.useCallback)(e=>x(t=>t.theme===e?t:{...t,theme:e}),[]);return{currentIndex:a,setCurrentIndex:l,currentTrack:j,isPlaying:s,togglePlay:y,currentTime:r,duration:o,seek:e=>{let a=t.current;!a||Number.isNaN(e)||(a.currentTime=e,d(e))},volume:h.volume,setVolume:e=>x({...h,volume:e}),next:()=>{h.shuffle&&f(e=>[...e,a]),l(b())},prev:()=>l((()=>{if(0===e.length)return 0;if(h.shuffle&&p.length>0){let e=p[p.length-1];return f(e=>e.slice(0,-1)),e}return(a-1+e.length)%e.length})()),repeat:h.repeat,setRepeatMode:e=>x({...h,repeat:e}),shuffle:h.shuffle,toggleShuffle:()=>x({...h,shuffle:!h.shuffle}),loading:u,lastError:g,lang:h.lang,setLang:k,theme:h.theme,setTheme:w}}(x),{t:ez}=ed();(0,i.useEffect)(()=>{t.auth.getUser().then(t=>{let{data:a,error:s}=t;if(s||!a.user)return void e.replace("/login");l(a.user.id)});let{data:a}=t.auth.onAuthStateChange((t,a)=>{var s,i;let n=null!=(i=null==a||null==(s=a.user)?void 0:s.id)?i:null;l(n),n||e.replace("/login")});return()=>null==a?void 0:a.subscription.unsubscribe()},[e,t]);let eI=(0,i.useCallback)(async()=>{if(!a)return;let{data:e,error:l}=await t.from("playlists").select("*").eq("user_id",a).order("created_at",{ascending:!0});if(l){console.error(l),r([]);return}r(e),!u&&e.length>0&&m(e[0].id)},[t,a,u]),eO=(0,i.useCallback)(async e=>{if(!a)return;let{data:l,error:s}=await t.from("playlist_tracks").select("tracks(*), track_id").eq("playlist_id",e).order("created_at",{ascending:!0});if(s){console.error(s),U([]);return}U((null!=l?l:[]).map(e=>{var t,a,l,s;return{id:e.tracks.id,title:e.tracks.title,artist:e.tracks.artist,src:e.tracks.public_url,cover:ev,duration:null!=(t=e.tracks.duration)?t:void 0,mimeType:null!=(a=e.tracks.mime_type)?a:void 0,size:null!=(l=e.tracks.size)?l:void 0,filePath:null!=(s=e.tracks.file_path)?s:void 0}})),W(0)},[t,a,W]);(0,i.useEffect)(()=>{eI()},[eI]),(0,i.useEffect)(()=>{u&&eO(u)},[u,eO]);let eB=async e=>{if(!a)return;let{data:l,error:s}=await t.from("playlists").insert({name:e,user_id:a}).select("*").single();s||(r(e=>[...e,{id:l.id,name:l.name}]),m(l.id))},eF=async e=>{let{file:l,title:s,artist:i,playlistId:n}=e;if(!a)return;let r="".concat(crypto.randomUUID(),"_").concat(l.name.replace(/[^\w.-]+/g,"_")),d="".concat(a,"/").concat(r),{error:o}=await t.storage.from(eg).upload(d,l,{cacheControl:"3600",upsert:!1,contentType:l.type||"audio/mpeg"});if(o)return"string"==typeof o.message&&o.message.toLowerCase().includes("bucket not found")?void alert('Bucket "'.concat(eg,'" tidak ditemukan.\n\nBuat bucket di Supabase Dashboard → Storage → Create bucket, beri nama "').concat(eg,'" dan set Public (untuk setup cepat). Lalu coba upload lagi.\n\nAtau ubah env NEXT_PUBLIC_SUPABASE_BUCKET agar sesuai nama bucket kamu.')):void alert("Upload failed: ".concat(o.message));let{data:c}=t.storage.from(eg).getPublicUrl(d),m=c.publicUrl,h=await new Promise(e=>{try{let t=new Audio,a=URL.createObjectURL(l);t.preload="metadata",t.src=a,t.onloadedmetadata=()=>{let l=Number.isFinite(t.duration)?t.duration:void 0;URL.revokeObjectURL(a),e(l)},t.onerror=()=>{URL.revokeObjectURL(a),e(void 0)}}catch(t){e(void 0)}}),{data:x,error:p}=await t.from("tracks").insert({user_id:a,title:s,artist:i,file_path:d,public_url:m,mime_type:l.type||null,size:l.size||null,duration:h||null}).select("*").single();if(p)return void alert("Failed to save track: ".concat(p.message));let{error:f}=await t.from("playlist_tracks").insert({playlist_id:n,track_id:x.id});if(f)return void alert("Failed to link track to playlist: ".concat(f.message));u===n&&U(e=>{var t,a,l,s;return[...e,{id:x.id,title:x.title,artist:x.artist,src:x.public_url,cover:ev,duration:null!=(t=x.duration)?t:void 0,mimeType:null!=(a=x.mime_type)?a:void 0,size:null!=(l=x.size)?l:void 0,filePath:null!=(s=x.file_path)?s:void 0}]})},eD=async()=>{await t.auth.signOut(),e.replace("/login")},eR=async e=>{if(!u)return;let{error:a}=await t.from("playlist_tracks").delete().eq("playlist_id",u).eq("track_id",e);if(a)return void alert(a.message);U(t=>{let a=t.findIndex(t=>t.id===e),l=t.filter(t=>t.id!==e);return -1!==a&&(K>a?W(K-1):K===a&&(l.length>a?W(a):W(Math.max(0,a-1)))),l})},e$=async e=>{try{if(e.filePath){let{error:a}=await t.storage.from(eg).remove([e.filePath]);a&&console.warn("Storage remove error:",a.message)}let{error:a}=await t.from("tracks").delete().eq("id",e.id);if(a)return void alert(a.message);U(t=>{let a=t.findIndex(t=>t.id===e.id),l=t.filter(t=>t.id!==e.id);return -1!==a&&(K>a?W(K-1):K===a&&(l.length>a?W(a):W(Math.max(0,a-1)))),l})}catch(e){var a;alert(null!=(a=null==e?void 0:e.message)?a:"Failed to delete track")}},eM=async e=>{var a,l,s;try{let{error:s}=await t.from("playlists").delete().eq("id",e.id);if(s)return void alert(s.message);if(r(t=>t.filter(t=>t.id!==e.id)),u===e.id){let t=null!=(l=null==(a=n.filter(t=>t.id!==e.id)[0])?void 0:a.id)?l:null;m(t),U([]),W(0)}}catch(e){alert(null!=(s=null==e?void 0:e.message)?s:"Failed to delete playlist")}},eJ="one"===ew?(0,s.jsx)(p.A,{className:"h-5 w-5"}):(0,s.jsx)(f.A,{className:"h-5 w-5"}),eY=ec<=.001;return(0,s.jsxs)(er,{initialLang:e_,onLangChange:eL,children:[(0,s.jsxs)("div",{className:"relative mx-auto max-w-6xl px-4 pb-10 pt-6 md:pt-10",children:[(0,s.jsxs)("div",{className:"mb-6 flex items-center gap-2",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2 rounded-md border bg-card px-3 py-1.5",children:[(0,s.jsx)(g.A,{className:"h-4 w-4"}),(0,s.jsx)(ep,{})]}),(0,s.jsxs)("div",{className:"ml-auto flex items-center gap-2",children:[(0,s.jsx)(eh,{theme:eU,onThemeChange:eE}),(0,s.jsxs)(S.$,{variant:"outline",className:"gap-2",onClick:eD,children:[(0,s.jsx)(v.A,{className:"h-4 w-4"}),ez("signOut")]}),(0,s.jsx)(ek,{playlists:n,onUpload:eF,t:ez}),(0,s.jsxs)(I,{children:[(0,s.jsx)(O,{asChild:!0,children:(0,s.jsxs)(S.$,{variant:"outline",className:"gap-2 md:hidden",children:[(0,s.jsx)(j.A,{className:"h-4 w-4"}),ez("playlist")]})}),(0,s.jsxs)(D,{side:"right",className:"w-[88vw] sm:w-[420px]",children:[(0,s.jsx)(R,{children:(0,s.jsx)($,{children:ez("playlistsTitle")})}),(0,s.jsx)("div",{className:"mt-4",children:(0,s.jsx)(eN,{playlists:n,selectedId:u,onSelect:e=>m(e),onCreate:eB,onDeletePlaylist:e=>M(e),t:ez})})]})]})]})]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 gap-6 md:grid-cols-[300px_1fr]",children:[(0,s.jsxs)(_.Zp,{className:"hidden md:block",children:[(0,s.jsx)(_.aR,{children:(0,s.jsxs)(_.ZB,{className:"flex items-center gap-2",children:[(0,s.jsx)(j.A,{className:"h-5 w-5"}),ez("playlistsTitle")]})}),(0,s.jsx)(_.Wu,{children:(0,s.jsx)(eN,{playlists:n,selectedId:u,onSelect:e=>m(e),onCreate:eB,onDeletePlaylist:e=>M(e),t:ez})})]}),(0,s.jsx)(_.Zp,{className:"overflow-hidden",children:(0,s.jsxs)(_.Wu,{className:"p-0",children:[(0,s.jsxs)("div",{className:"grid gap-2 p-4 md:grid-cols-[260px_1fr] md:gap-6 md:p-6",children:[(0,s.jsxs)("div",{className:"flex flex-col items-center gap-4",children:[(0,s.jsxs)("div",{className:"relative h-[260px] w-[260px] overflow-hidden rounded-xl shadow-md",children:[(0,s.jsx)(d.N,{mode:"wait",children:(0,s.jsx)(o.P.div,{initial:{opacity:.4,scale:.98},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.98},transition:{duration:.25},className:(0,z.cn)("h-full w-full",el&&"animate-[spin_18s_linear_infinite]"),style:{willChange:"transform"},children:(0,s.jsx)("img",{src:(null==G?void 0:G.cover)||ev,alt:G?"".concat(G.title," cover"):"cover",className:"absolute inset-0 h-full w-full object-cover",onError:e=>{e.currentTarget.src=ev}})},(null==G?void 0:G.id)||"no-track")}),eT&&(0,s.jsx)("div",{className:"absolute inset-0 grid place-items-center bg-background/40 backdrop-blur-[2px]",children:(0,s.jsx)(y.A,{className:"h-8 w-8 animate-spin"})})]}),(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)("div",{className:"text-lg font-semibold line-clamp-1",children:(null==G?void 0:G.title)||ez("noTrack")}),(0,s.jsx)("div",{className:"text-sm text-muted-foreground line-clamp-1",children:(null==G?void 0:G.artist)||ez("noArtist")})]})]}),(0,s.jsxs)("div",{className:"flex flex-col justify-between gap-4",children:[(0,s.jsx)("div",{className:"grid gap-2",children:(0,s.jsxs)("div",{className:"flex items-center gap-3 text-xs text-muted-foreground",children:[(0,s.jsx)("span",{className:"tabular-nums",children:eb(ei)}),(0,s.jsx)("div",{className:"flex-1",children:(0,s.jsx)(L,{value:en?ei:0,max:Math.max(en,1),step:.1,onChange:e=>eo(e),"aria-label":ez("seek")})}),(0,s.jsx)("span",{className:"tabular-nums",children:eb(en)})]})}),(0,s.jsxs)("div",{className:"flex flex-col gap-4",children:[(0,s.jsxs)("div",{className:"flex items-center justify-center gap-2",children:[(0,s.jsx)(S.$,{variant:eP?"default":"ghost",size:"icon",onClick:eA,className:(0,z.cn)(eP&&"bg-primary text-primary-foreground"),"aria-pressed":eP,"aria-label":ez("shuffle"),children:(0,s.jsx)(b.A,{className:"h-5 w-5"})}),(0,s.jsx)(S.$,{variant:"ghost",size:"icon",onClick:ex,"aria-label":ez("prev"),children:(0,s.jsx)(N.A,{className:"h-6 w-6"})}),(0,s.jsx)(o.P.button,{onClick:es,className:"inline-flex h-12 w-12 items-center justify-center rounded-full bg-primary text-primary-foreground shadow focus:outline-none focus:ring-2 focus:ring-ring",whileTap:{scale:.95},"aria-label":el?ez("pause"):ez("play"),children:el?(0,s.jsx)(k.A,{className:"h-6 w-6"}):(0,s.jsx)(w.A,{className:"h-6 w-6"})}),(0,s.jsx)(S.$,{variant:"ghost",size:"icon",onClick:em,"aria-label":ez("next"),children:(0,s.jsx)(C.A,{className:"h-6 w-6"})}),(0,s.jsxs)(J,{children:[(0,s.jsx)(Y,{asChild:!0,children:(0,s.jsx)(S.$,{variant:"off"===ew?"ghost":"default",size:"icon","aria-label":ez("repeat"),children:eJ})}),(0,s.jsxs)(Z,{children:[(0,s.jsx)(V,{children:ez("repeat")}),(0,s.jsx)(X,{}),(0,s.jsx)(q,{onClick:()=>eC("off"),children:ez("repeatOff")}),(0,s.jsx)(q,{onClick:()=>eC("all"),children:ez("repeatAll")}),(0,s.jsx)(q,{onClick:()=>eC("one"),children:ez("repeatOne")})]})]})]}),(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)(S.$,{variant:"ghost",size:"icon",onClick:()=>eu(.8*!!eY),"aria-label":eY?ez("unmute"):ez("mute"),children:eY?(0,s.jsx)(P.A,{className:"h-5 w-5"}):(0,s.jsx)(A.A,{className:"h-5 w-5"})}),(0,s.jsx)(L,{value:100*ec,max:100,step:1,onChange:e=>eu(e/100),className:"max-w-[280px]","aria-label":ez("volume")})]})]}),eS&&G&&(0,s.jsxs)("div",{className:"rounded-md border border-destructive/30 bg-destructive/10 px-3 py-2 text-sm text-destructive",children:[(0,s.jsx)("div",{className:"font-medium",children:eS}),(0,s.jsxs)("ul",{className:"mt-1 text-xs text-destructive/90",children:[(0,s.jsxs)("li",{children:["Source: ",G.src]}),(0,s.jsxs)("li",{children:["Ext: ",ey(G.src)||"(unknown)"," | MIME: ",G.mimeType||"(unknown)"]}),(0,s.jsxs)("li",{children:["Size: ",function(e){if(!e&&0!==e)return"";let t=["B","KB","MB","GB"],a=0,l=e;for(;l>=1024&&a<t.length-1;)l/=1024,a++;return"".concat(l.toFixed(1)," ").concat(t[a])}(G.size)]})]})]}),(0,s.jsx)("p",{className:"text-xs text-muted-foreground",children:ez("tip")})]})]}),(0,s.jsxs)("div",{className:"border-t p-4",children:[(0,s.jsxs)("div",{className:"mb-2 text-sm font-medium",children:[ez("playlist")," ",u?"":"(".concat(ez("noPlaylistsYet"),")")]}),(0,s.jsxs)("div",{className:"space-y-2",children:[x.map((e,t)=>(0,s.jsxs)("div",{className:(0,z.cn)("w-full flex items-center gap-3 p-2 rounded-md hover:bg-muted transition-colors",t===K&&"bg-muted"),"aria-current":t===K?"true":"false",children:[(0,s.jsxs)("button",{onClick:()=>W(t),className:"flex items-center gap-3 flex-1 text-left",children:[(0,s.jsx)("div",{className:"relative h-12 w-12 overflow-hidden rounded",children:(0,s.jsx)("img",{src:e.cover||ev,alt:"".concat(e.title," cover"),className:"absolute inset-0 h-full w-full object-cover",onError:e=>{e.currentTarget.src=ev}})}),(0,s.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,s.jsx)("div",{className:"font-medium leading-tight line-clamp-1",children:e.title}),(0,s.jsx)("div",{className:"text-xs text-muted-foreground line-clamp-1",children:e.artist})]})]}),(0,s.jsx)("div",{className:"text-xs tabular-nums text-muted-foreground mr-1",children:e.duration?eb(e.duration):ez("unknown")}),(0,s.jsxs)(J,{children:[(0,s.jsx)(Y,{asChild:!0,children:(0,s.jsx)(S.$,{variant:"ghost",size:"icon","aria-label":"Track actions",children:(0,s.jsx)(T.A,{className:"h-4 w-4"})})}),(0,s.jsxs)(Z,{align:"end",children:[(0,s.jsx)(V,{children:ez("playlist")}),(0,s.jsx)(q,{onClick:()=>eR(e.id),children:ez("removeFromPlaylist")}),(0,s.jsx)(X,{}),(0,s.jsxs)(q,{className:"text-destructive focus:text-destructive",onClick:()=>B(e),children:[(0,s.jsx)(h.A,{className:"mr-2 h-4 w-4"}),ez("deleteTrack")]})]})]})]},e.id)),0===x.length&&(0,s.jsx)("div",{className:"text-xs text-muted-foreground",children:ez("noTracksInPlaylist")})]})]})]})})]}),(0,s.jsxs)("div",{className:"fixed inset-x-3 bottom-3 z-20 rounded-xl border bg-card/95 p-3 shadow-lg backdrop-blur supports-[backdrop-filter]:bg-card/60 md:hidden",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)("div",{className:"relative h-10 w-10 overflow-hidden rounded-md",children:(0,s.jsx)("img",{src:(null==G?void 0:G.cover)||ev,alt:"cover",className:"absolute inset-0 h-full w-full object-cover",onError:e=>{e.currentTarget.src=ev}})}),(0,s.jsxs)("div",{className:"min-w-0 flex-1",children:[(0,s.jsx)("div",{className:"truncate text-sm font-medium",children:(null==G?void 0:G.title)||ez("noTrack")}),(0,s.jsxs)("div",{className:"truncate text-xs text-muted-foreground",children:[eb(ei)," / ",eb(en)]})]}),(0,s.jsx)(S.$,{variant:"ghost",size:"icon",onClick:ex,"aria-label":ez("prev"),children:(0,s.jsx)(N.A,{className:"h-5 w-5"})}),(0,s.jsx)(S.$,{className:"h-10 w-10 rounded-full",onClick:es,"aria-label":el?ez("pause"):ez("play"),children:el?(0,s.jsx)(k.A,{className:"h-5 w-5"}):(0,s.jsx)(w.A,{className:"h-5 w-5"})}),(0,s.jsx)(S.$,{variant:"ghost",size:"icon",onClick:em,"aria-label":ez("next"),children:(0,s.jsx)(C.A,{className:"h-5 w-5"})})]}),(0,s.jsx)("div",{className:"mt-2 px-1",children:(0,s.jsx)(L,{value:en?ei:0,max:Math.max(en,1),step:.1,onChange:e=>eo(e),"aria-label":ez("seek")})})]})]}),(0,s.jsx)(H,{open:!!E,onOpenChange:e=>{e||B(null)},children:(0,s.jsxs)(Q,{children:[(0,s.jsx)(ee,{children:(0,s.jsx)(ea,{children:ez("confirmDeleteTrackTitle")})}),(0,s.jsxs)("div",{className:"text-sm text-muted-foreground",children:[null==E?void 0:E.title," — ",ez("actionCannotBeUndone")]}),(0,s.jsxs)(et,{children:[(0,s.jsx)(S.$,{variant:"outline",onClick:()=>B(null),children:ez("cancel")}),(0,s.jsx)(S.$,{variant:"destructive",onClick:async()=>{E&&await e$(E),B(null)},children:ez("delete")})]})]})}),(0,s.jsx)(H,{open:!!F,onOpenChange:e=>{e||M(null)},children:(0,s.jsxs)(Q,{children:[(0,s.jsx)(ee,{children:(0,s.jsx)(ea,{children:ez("confirmDeletePlaylistTitle")})}),(0,s.jsxs)("div",{className:"text-sm text-muted-foreground",children:[null==F?void 0:F.name," — ",ez("actionCannotBeUndone")]}),(0,s.jsxs)(et,{children:[(0,s.jsx)(S.$,{variant:"outline",onClick:()=>M(null),children:ez("cancel")}),(0,s.jsx)(S.$,{variant:"destructive",onClick:async()=>{F&&await eM(F),M(null)},children:ez("delete")})]})]})})]},e_)}function eC(){let[e,t]=(0,i.useState)(!0),[a,l]=(0,i.useState)(null);return((0,i.useEffect)(()=>{let e=(0,c.A)();e.auth.getUser().then(e=>{var a,s;let{data:i}=e;l(null!=(s=null==(a=i.user)?void 0:a.id)?s:null),t(!1)});let{data:{subscription:a}}=e.auth.onAuthStateChange((e,t)=>{var a,s;l(null!=(s=null==t||null==(a=t.user)?void 0:a.id)?s:null)});return()=>a.unsubscribe()},[]),e)?(0,s.jsx)("main",{className:"min-h-screen grid place-items-center",children:(0,s.jsx)("div",{className:"text-sm text-muted-foreground",children:"Loading..."})}):a?(0,s.jsx)("main",{className:"min-h-screen",children:(0,s.jsx)(ew,{})}):(0,s.jsx)("main",{className:"min-h-screen grid place-items-center p-6",children:(0,s.jsxs)("div",{className:"max-w-md text-center space-y-4",children:[(0,s.jsx)("h1",{className:"text-2xl font-semibold",children:"Music Player"}),(0,s.jsx)("p",{className:"text-muted-foreground",children:"Please log in to upload your music, manage playlists, and listen to your library."}),(0,s.jsx)(S.$,{asChild:!0,children:(0,s.jsx)(r(),{href:"/login",children:"Go to Login / Register"})})]})})}},6414:(e,t,a)=>{"use strict";a.d(t,{A:()=>i});var l=a(2354);let s=null;function i(){if(s)return s;let e="https://rmzccfhikxjpktesqqoq.supabase.co",t="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InJtemNjZmhpa3hqcGt0ZXNxcW9xIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTQ2NzA4NTYsImV4cCI6MjA3MDI0Njg1Nn0.dNw3_-auupS6j2hPao7IlkrMsbYb20-JudtcOUG2YsU";if(!e||!t){let a=(()=>{try{let e=localStorage.getItem("DEV_SUPABASE_URL"),t=localStorage.getItem("DEV_SUPABASE_ANON");if(e&&t)return{url:e,anon:t}}catch(e){}return null})();a&&(e=a.url,t=a.anon)}if(!e||!t)throw Error("Missing NEXT_PUBLIC_SUPABASE_URL or NEXT_PUBLIC_SUPABASE_ANON_KEY.\nPerbaiki dengan salah satu cara:\n- Opsi 1 (disarankan): .env.local di root project, lalu restart `npm run dev`.\n- Opsi 2 (dev saja): buka /dev/supabase-config, isi DEV_SUPABASE_URL & DEV_SUPABASE_ANON.\nHalaman cek: /env-check");return s=(0,l.UU)(e,t,{auth:{persistSession:!0,autoRefreshToken:!0,detectSessionInUrl:!0}})}},7168:(e,t,a)=>{"use strict";a.d(t,{$:()=>d});var l=a(5155);a(2115);var s=a(9708),i=a(2085),n=a(3999);let r=(0,i.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",{variants:{variant:{default:"bg-primary text-primary-foreground shadow-xs hover:bg-primary/90",destructive:"bg-destructive text-white shadow-xs hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"border bg-background shadow-xs hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50",secondary:"bg-secondary text-secondary-foreground shadow-xs hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2 has-[>svg]:px-3",sm:"h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5",lg:"h-10 rounded-md px-6 has-[>svg]:px-4",icon:"size-9"}},defaultVariants:{variant:"default",size:"default"}});function d(e){let{className:t,variant:a,size:i,asChild:d=!1,...o}=e,c=d?s.DX:"button";return(0,l.jsx)(c,{"data-slot":"button",className:(0,n.cn)(r({variant:a,size:i,className:t})),...o})}},8482:(e,t,a)=>{"use strict";a.d(t,{Wu:()=>d,ZB:()=>r,Zp:()=>i,aR:()=>n});var l=a(5155);a(2115);var s=a(3999);function i(e){let{className:t,...a}=e;return(0,l.jsx)("div",{"data-slot":"card",className:(0,s.cn)("bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm",t),...a})}function n(e){let{className:t,...a}=e;return(0,l.jsx)("div",{"data-slot":"card-header",className:(0,s.cn)("@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-1.5 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6",t),...a})}function r(e){let{className:t,...a}=e;return(0,l.jsx)("div",{"data-slot":"card-title",className:(0,s.cn)("leading-none font-semibold",t),...a})}function d(e){let{className:t,...a}=e;return(0,l.jsx)("div",{"data-slot":"card-content",className:(0,s.cn)("px-6",t),...a})}},9852:(e,t,a)=>{"use strict";a.d(t,{p:()=>i});var l=a(5155);a(2115);var s=a(3999);function i(e){let{className:t,type:a,...i}=e;return(0,l.jsx)("input",{type:a,"data-slot":"input",className:(0,s.cn)("file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input flex h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm","focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]","aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",t),...i})}}},e=>{e.O(0,[352,977,34,441,964,358],()=>e(e.s=1625)),_N_E=e.O()}]);